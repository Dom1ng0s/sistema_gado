<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lixeira - Sistema Gado</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #c62828; padding-bottom: 10px; margin-bottom: 20px;">
        <div style="display: flex; align-items: center; gap: 10px;">
            <h1 style="border: none; margin: 0; padding: 0; color: #c62828;">üóëÔ∏è Lixeira de Animais</h1>
        </div>
        <a href="{{ url_for('operacional.painel') }}" class="btn btn-secondary">Voltar ao Rebanho</a>
    </div>

    <form action="{{ url_for('operacional.lixeira') }}" method="GET" class="search-bar">
        <input type="text" name="busca" class="input-busca" placeholder="Buscar brinco exclu√≠do..." value="{{ busca }}">
        <button type="submit" class="btn-buscar">üîç Buscar</button>
        
        {% if busca %}
            <a href="{{ url_for('operacional.lixeira') }}" class="btn-limpar">Limpar</a>
        {% endif %}
    </form>

    <div class="alert" style="background-color: #ffebee; color: #c62828; margin-bottom: 20px; text-align: left; border: 1px solid #ffcdd2;">
        <strong>Aten√ß√£o:</strong> Os animais listados abaixo foram exclu√≠dos e <u>n√£o</u> s√£o contabilizados no financeiro nem nos gr√°ficos.
        Ao restaurar, eles voltar√£o a aparecer nos relat√≥rios.
    </div>

    <table>
        <thead>
            <tr style="background-color: #ef9a9a; color: white;">
                <th>Brinco</th>
                <th>Sexo</th>
                <th>Data da Exclus√£o</th>
                <th style="text-align: center;">A√ß√£o</th>
            </tr>
        </thead>
        <tbody>
            {% for animal in lista_animais %}
            <tr>
                <td style="font-weight: bold; color: #555;">{{ animal[1] }}</td>
                <td>{{ animal[2] }}</td>
                <td>{{ animal[3].strftime('%d/%m/%Y √†s %H:%M') }}</td>
                <td style="text-align: center;">
                    <a href="{{ url_for('operacional.restaurar_animal', id_animal=animal[0]) }}" 
                       class="btn" 
                       style="background-color: #2e7d32; padding: 6px 15px; font-size: 0.9em; margin: 0; border: none; color: white; text-decoration: none; border-radius: 4px;">
                       ‚ôªÔ∏è Restaurar
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" style="text-align: center; padding: 40px; color: #999;">
                    A lixeira est√° vazia. Nenhum animal exclu√≠do recentemente.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="display: flex; justify-content: center; margin-top: 20px; gap: 10px;">
        {% if pagina_atual > 1 %}
            <a href="{{ url_for('operacional.lixeira', page=pagina_atual-1, busca=busca) }}" class="btn btn-secondary">&laquo; Anterior</a>
        {% else %}
            <span class="btn btn-secondary" style="opacity: 0.5; cursor: not-allowed;">&laquo; Anterior</span>
        {% endif %}

        {% if total_paginas > 1 %}
            <span style="align-self: center; font-weight: bold;">P√°gina {{ pagina_atual }} de {{ total_paginas }}</span>
        {% endif %}

        {% if pagina_atual < total_paginas %}
            <a href="{{ url_for('operacional.lixeira', page=pagina_atual+1, busca=busca) }}" class="btn btn-secondary">Pr√≥ximo &raquo;</a>
        {% else %}
            <span class="btn btn-secondary" style="opacity: 0.5; cursor: not-allowed;">Pr√≥ximo &raquo;</span>
        {% endif %}
    </div>

</body>
</html>