<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador de Custos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .res-box { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-top: 20px; border: 1px solid #90caf9; }
        .res-destaque { font-size: 1.5em; font-weight: bold; color: #1565c0; }
        .grid-sim { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .grid-sim { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <h1>Simulador de Ponto de Equilíbrio</h1>
    <p>Ajuste os valores abaixo para calcular o custo real da sua @ produzida.</p>

    <form action="{{ url_for('financeiro.simulador_custo') }}" method="POST" class="form-container" style="max-width: 800px;">
        <div class="grid-sim">
            <div>
                <h3>Parâmetros Produtivos</h3>
                <div class="form-group">
                    <label>Quantidade de Animais (Cabeças):</label>
                    <input type="number" name="qtd_animais" value="{{ sugestoes.qtd_animais }}">
                </div>
                <div class="form-group">
                    <label>GMD Projetado (kg/dia):</label>
                    <input type="text" name="gmd" value="{{ sugestoes.gmd_medio }}">
                    <small>Ganho Médio Diário esperado</small>
                </div>
            </div>

            <div>
                <h3>Custos Mensais (R$)</h3>
                <div class="form-group">
                    <label>Arrendamento Total:</label>
                    <input type="text" name="custo_arrendamento" value="{{ sugestoes.arrendamento|round(2) }}">
                </div>
                <div class="form-group">
                    <label>Suplementação Total:</label>
                    <input type="text" name="custo_suplementacao" value="{{ sugestoes.suplementacao|round(2) }}">
                </div>
                <div class="form-group">
                    <label>Mão de Obra Total:</label>
                    <input type="text" name="custo_mao_obra" value="{{ sugestoes.mao_obra|round(2) }}">
                </div>
                <div class="form-group">
                    <label>Outros Custos:</label>
                    <input type="text" name="custos_extras" value="{{ sugestoes.extras|round(2) }}">
                </div>
            </div>
        </div>

        <button type="submit" class="btn-salvar" style="margin-top: 20px;">CALCULAR CUSTO DA ARROBA</button>
    </form>

    {% if resultados %}
        {% if resultados.erro %}
            <div class="alert-erro">{{ resultados.erro }}</div>
        {% else %}
            <div class="res-box">
                <h2>Resultados da Simulação</h2>
                <div class="grid-sim">
                    <div>
                        <p>Custo Mensal da Fazenda: <strong>R$ {{ resultados.custo_mensal_total }}</strong></p>
                        <p>Custo por Cabeça/Dia: <strong>R$ {{ resultados.custo_diaria }}</strong></p>
                    </div>
                    <div style="text-align: right;">
                        <p>Dias para produzir 1@: <strong>{{ resultados.dias_arroba }} dias</strong></p>
                        <p>Custo de Produção da @:</p>
                        <div class="res-destaque">R$ {{ resultados.custo_arroba }}</div>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endif %}

    <br>
    <a href="{{ url_for('financeiro.financeiro') }}" class="btn btn-voltar">Voltar ao Financeiro</a>
</body>
</html>